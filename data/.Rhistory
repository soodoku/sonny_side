2+2
install.packages(tidyverse)
install.packages("tidyverse")
2+2
require(tidyverse)
# Load libs
library(readr)
library(stringr)
library(stringr)
#Kentucky
ky_daughter <- read.csv("ky/ky-daughter.csv", stringsAsFactors = FALSE)
# setwd
#setwd(githubdir)
#setwd("sons_and_daughters/data/")
setwd("C:\\Users\\wguil\\OneDrive\\Documents\\GitHub\\sonny_side\\data")
#Kentucky
ky_daughter <- read.csv("ky/ky-daughter.csv", stringsAsFactors = FALSE)
ky_son <- read.csv("ky/ky-son.csv", stringsAsFactors = FALSE)
View(ky_daughter)
#Kentucky
ky_daughter <- read.csv("ky/ky-daughter.csv", stringsAsFactors = FALSE)
View(ky_daughter)
ky_daughter[!duplicated(ky_daughter$CompanyName),]
duplicated(ky_daughter$CompanyName)
ky_daughter[!duplicated(ky_daughter$CompanyName),]
lenght(ky_daughter[!duplicated(ky_daughter$CompanyName),])
length(ky_daughter[!duplicated(ky_daughter$CompanyName),])
dim(ky_daughter[!duplicated(ky_daughter$CompanyName),])
View(ky_daughter)
ky_daughter$CompanyName[sapply(lapply(str_extract_all(tolower(ky_daughter$CompanyName), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) > 0]
dim(ky_daughter$CompanyName[sapply(lapply(str_extract_all(tolower(ky_daughter$CompanyName), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) > 0])
ky_daughter$CompanyName[sapply(lapply(str_extract_all(tolower(ky_daughter$CompanyName), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) > 0]
ky_son <- read.csv("ky/ky-son.csv", stringsAsFactors = FALSE)
duplicated(ky_son$CompanyName)
sum(duplicated(ky_son$CompanyName))
ky_son_dedup <- ky_son[!duplicated(ky_son$CompanyName), ]
ky_son_dedup$CompanyName[sapply(lapply(str_extract_all(tolower(ky_son_dedup$CompanyName), "\\w+"), function(x) str_detect(x, "^sons$|^son$")), sum) > 0]
ky_son_dedup$CompanyName[sapply(lapply(str_extract_all(tolower(ky_son_dedup$CompanyName), "\\w+"), function(x) str_detect(x, "^sons$|^son$")), sum) == 0]
ky_son_dedup$CompanyName[sapply(lapply(str_extract_all(tolower(ky_son_dedup$CompanyName), "\\w+"), function(x) str_detect(x, "^sons$|^son$")), sum) > 0]
ky_daughter$CompanyName[sapply(lapply(str_extract_all(tolower(ky_daughter$CompanyName), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) > 0]
ky_son_dedup$CompanyName[sapply(lapply(str_extract_all(tolower(ky_son_dedup$CompanyName), "\\w+"), function(x) str_detect(x, "^sons$|^son$")), sum) > 0]
#Maine
me_daughter <- read.csv("me/me-daughter.csv", stringsAsFactors = FALSE)
View(me_daughter)
me_daughter$Entity[sapply(lapply(str_extract_all(tolower(me_daughter$Entity), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) > 0]
me_daughter$Entity[sapply(lapply(str_extract_all(tolower(me_daughter$Entity), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) == 0]
me_daughter$Entity[sapply(lapply(str_extract_all(tolower(me_daughter$Entity), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) > 0]
me_son <- read.csv("me/me-son.csv", stringsAsFactors = FALSE)
me_son_dedup <- me_son[!duplicated(me_son$Entity), ]
me_son_dedup$Entity[sapply(lapply(str_extract_all(tolower(me_son_dedup$Entity), "\\w+"), function(x) str_detect(x, "^sons$|^son$")), sum) > 0]
me_son_dedup$Entity[sapply(lapply(str_extract_all(tolower(me_son_dedup$Entity), "\\w+"), function(x) str_detect(x, "^sons$|^son$")), sum) == 0]
me_son_dedup$Entity[sapply(lapply(str_extract_all(tolower(me_son_dedup$Entity), "\\w+"), function(x) str_detect(x, "^sons$|^son$")), sum) > 0]
#Maryland
md_daughter <- read.csv("md/md-daughter.csv", stringsAsFactors = FALSE)
#Maryland
md_daughter <- read.csv("md/md-daughter.csv", stringsAsFactors = FALSE)
#Maryland
md_daughter <- read.csv("md/md_daughter.csv", stringsAsFactors = FALSE)
View(md_daughter)
md_daughter$BusinessName[sapply(lapply(str_extract_all(tolower(md_daughter$BusinessName), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) > 0]
md_daughter$BusinessName[sapply(lapply(str_extract_all(tolower(md_daughter$BusinessName), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) == 0]
md_daughter$BusinessName[sapply(lapply(str_extract_all(tolower(md_daughter$BusinessName), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) > 0]
md_son <- read.csv("md/md_son.csv", stringsAsFactors = FALSE)
md_son_dedup <- md_son[!duplicated(md_son$BusinessName), ]
md_son_dedup$BusinessName[sapply(lapply(str_extract_all(tolower(md_son_dedup$BusinessName), "\\w+"), function(x) str_detect(x, "^sons$|^son$")), sum) == 0]
md_son_dedup$BusinessName[sapply(lapply(str_extract_all(tolower(md_son_dedup$BusinessName), "\\w+"), function(x) str_detect(x, "^sons$|^son$")), sum) > 0]
#Massachusets
ma_son <- read.csv("ma/ma_son.csv", stringsAsFactors = FALSE)
View(ma_son)
ma_son <- ma_son[!is.na(ma_son$Entity.Name), ]
ma_son <- ma_son[!is.na(ma_son$ID.Number), ]
ma_son$Entity.Name
ma_son <- ma_son[ma_son$Entity.Name) != "", ]
ma_son <- ma_son[ma_son$Entity.Name != "", ]
#Massachusets
ma_daughter <- read.csv("ma/ma_daughter.csv", stringsAsFactors = FALSE)
ma_daughter <- ma_daughter[ma_daughter$Entity.Name != "", ] #brought empty lines son need to remove
View(ma_daughter)
ma_daughter$Entity.Name[sapply(lapply(str_extract_all(tolower(ma_daughter$Entity.Name), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) == 0]
ma_daughter$Entity.Name[sapply(lapply(str_extract_all(tolower(ma_daughter$Entity.Name), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) > 0]
ma_son$Entity.Name[sapply(lapply(str_extract_all(tolower(ma_son$Entity.Name), "\\w+"), function(x) str_detect(x, "^sons$|^son$")), sum) == 0]
ma_son$Entity.Name[sapply(lapply(str_extract_all(tolower(ma_son$Entity.Name), "\\w+"), function(x) str_detect(x, "^sons$|^son$")), sum) > 0]
#Massachusets
ma_daughter <- read.csv("ma/ma_daughter.csv", stringsAsFactors = FALSE)
ma_daughter <- ma_daughter[ma_daughter$Entity.Name != "", ] #brought empty lines so need to remove
ma_daughter_dedup <- ma_daughter[!duplicated(ma_daughter$Entity.Name), ]
ma_daughter_dedup$Entity.Name[sapply(lapply(str_extract_all(tolower(ma_daughter_dedup$Entity.Name), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) > 0]
ma_son <- read.csv("ma/ma_son.csv", stringsAsFactors = FALSE)
ma_son <- ma_son[ma_son$Entity.Name != "", ] #brought empty lines so need to remove
ma_son_dedup <- ma_son[!duplicated(ma_son$Entity.Name), ]
ma_son_dedup$Entity.Name[sapply(lapply(str_extract_all(tolower(ma_son_dedup$Entity.Name), "\\w+"), function(x) str_detect(x, "^sons$|^son$")), sum) == 0]
ma_son_dedup$Entity.Name[sapply(lapply(str_extract_all(tolower(ma_son_dedup$Entity.Name), "\\w+"), function(x) str_detect(x, "^sons$|^son$")), sum) > 0]
#Minnesota
mn_daughter <- read.csv("mn/mn_daughter.csv", stringsAsFactors = FALSE)
View(md_daughter)
mn_daughter_dedup <- mn_daughter[!duplicated(mn_daughter$Business.Name), ]
#Minnesota
mn_daughter <- read.csv("mn/mn_daughter.csv", stringsAsFactors = FALSE)
mn_daughter_dedup
mn_daughter_dedup[sapply(lapply(str_extract_all(tolower(mn_daughter_dedup), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) > 0]
mn_daughter_dedup[sapply(lapply(str_extract_all(tolower(mn_daughter_dedup), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) == 0]
mn_daughter_dedup[sapply(lapply(str_extract_all(tolower(mn_daughter_dedup), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) > 0]
#Minnesota
mn_daughter <- read.csv("mn/mn_daughter.csv", stringsAsFactors = FALSE)
mn_daughter_dedup <- mn_daughter[!duplicated(mn_daughter$Business.Name), ]
mn_daughter_dedup[sapply(lapply(str_extract_all(tolower(mn_daughter_dedup), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) > 0]
mn_son <- read.csv("mn/mn_son.csv", stringsAsFactors = FALSE)
mn_son_dedup <- mn_son[!duplicated(mn_son$Business.Name), ]
mn_son_dedup[sapply(lapply(str_extract_all(tolower(mn_son_dedup), "\\w+"), function(x) str_detect(x, "^sons$|^son$")), sum) > 0]
mn_daughter_dedup[sapply(lapply(str_extract_all(tolower(mn_daughter_dedup), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) > 0]
mn_son_dedup[sapply(lapply(str_extract_all(tolower(mn_son_dedup), "\\w+"), function(x) str_detect(x, "^sons$|^son$")), sum) > 0]
#Nebraska
ne_daughter <- read.csv("ne/ne_daughter.csv", stringsAsFactors = FALSE)
ne_daughter$Name[sapply(lapply(str_extract_all(tolower(ne_daughter$Name), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) > 0]
ne_daughter$Name[sapply(lapply(str_extract_all(tolower(ne_daughter$Name), "\\w+"), function(x) str_detect(x, "^daughters$|^daughter$")), sum) == 0]
